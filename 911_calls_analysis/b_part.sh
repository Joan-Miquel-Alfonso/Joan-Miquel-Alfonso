#!/bin/bash
awk -F, -v OFS=, '{if (NR>1) print $0","substr($3,length($3)-8,2)","substr($6,12,2); else print $0, "hour1", "hour2"}' 911.csv | ( head -1  && grep --color=never -E '.*,.*,.*,.*,.*,2020-03-[0][2-6,9]([[:print:]]*)?|2020-03-[1][0-3,6-9]([[:print:]]*)?|2020-03-[2][0,3-7]([[:print:]]*)?|2020-03-[3][0-1]([[:print:]]*)?|2020-04-[0][1-3,6-9]([[:print:]]*)?|2020-04-[1][3-7]([[:print:]]*)?|2020-04-[2][0-4,7-9]([[:print:]]*)?|2020-04-30([[:print:]]*)?|2020-05-[0][4-8]([[:print:]]*)?|2020-05-[1][1-5,8-9]([[:print:]]*)?|2020-05-[2][0-2,5-9]([[:print:]]*)?|2020-06-[0][1-5,8-9]([[:print:]]*)?|2020-06-[1][0-2,5-9]([[:print:]]*)?|2020-06-[2][2-6,9]([[:print:]]*)?|2020-06-30([[:print:]]*)?,.*.*.*' | grep --color=never -E '.*,.*,.*,.*,EMS:([[:print:]])*?,.*.*.*.*' ) > 911_2020_march-june_EMS.csv
